generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Template {
  id          String   @id @default(uuid())
  name        String
  description String?  @db.Text
  width       Float
  height      Float
  minioPath   String   @map("minio_path")
  thumbnail   String?
  createdAt   DateTime @default(now()) @map("created_at")
  updatedAt   DateTime @updatedAt @map("updated_at")

  printLogs PrintLog[]

  @@map("templates")
}

model PrintLog {
  id         String   @id @default(uuid())
  templateId String?  @map("template_id")
  copies     Int      @default(1)
  status     String   @default("sent")
  error      String?  @db.Text
  variables  String?  @db.Text
  printedAt  DateTime @default(now()) @map("printed_at")

  template Template? @relation(fields: [templateId], references: [id], onDelete: Cascade)

  @@map("print_logs")
}

model Counter {
  id      String @id @default(uuid())
  name    String @unique
  value   Int    @default(0)
  prefix  String @default("")
  padding Int    @default(0)

  @@map("counters")
}

model Image {
  id        String   @id @default(uuid())
  name      String
  minioPath String   @map("minio_path")
  width     Int
  height    Int
  createdAt DateTime @default(now()) @map("created_at")

  @@map("images")
}

model PrinterConfig {
  id   String @id @default("default")
  name String @default("Zebra ZT410")
  host String @default("192.168.3.44")
  port Int    @default(9100)
  dpi  Int    @default(203)

  @@map("printer_config")
}
